/*!CK:3299284484!*//*1426476180,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["v3+43"]); }

__d("ActivityLogStory",["ge","DOM","Event","Toggler","Run"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={removeStory:function(m,n){var o=g(m);o&&h.setContent(o,n);},registerPopover:function(m){var n=i.listen(window,'scroll',function(o){j.hide(m);});k.onLeave(n.remove.bind(n));}};e.exports=l;},null);
__d("AllActivityContentLoader",["Arbiter","CSS","DOM","DOMScroll","OnVisible","Parent","MorePagerFetchOnScroll","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","UIPagelet","Vector","$","clickRefAction","copyProperties","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=false,z=0,aa=null,ba={},ca=[],da={},ea=[],fa=null;function ga(ka,la,ma,na,oa){this.node=ka;this.canScrollLoad=true;this.scrubberKey=la;this._pageletLoadData=ma;this.loaded=na;this.sortKey=oa;this.contentNode=i.scry(ka,"div._z6j")[0];}function ha(){if(y)return;p.register(n.CONTENT,ja);v('scrubber').set_namespace('allactivity');y=true;}function ia(ka){var la=q.get(ka);la&&la.canScrollLoad&&la.load();}w(ga.prototype,{load:function(){if(this.loaded)return;this.loaded=true;this.contentNode&&h.hide(this.contentNode);h.show(l.byClass(this.node,'fbTimelineSection'));var ka=this.node;function la(na){r.run(ka,na);}var ma=i.find(this.node,'div.fbTimelineLogStream');ea.push(s.loadFromEndpoint('TimelineEntStoryActivityLogPagelet',ma.id,this._pageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true,displayCallback:la,append:true}));},contentAdded:function(ka){if(!this.hasContent){h.removeClass(l.byClass(this.node,'stat_elem'),'async_saving');if(this.contentNode){ka&&i.prependContent(this.contentNode,ka);h.show(this.contentNode);}this.hasContent=true;}},fullyLoaded:function(){if(!this.hasContent){h.removeClass(l.byClass(this.node,'stat_elem'),'async_saving');h.show(i.find(this.node,"div._40pu"));this.contentNode&&h.hide(this.contentNode);}},activateScrollLoad:function(){this.canScrollLoad=true;da[this.scrubberKey]&&da[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this.canScrollLoad=false;}else{var ka=i.scry(this.node,'.uiMorePager');if(ka)ka.map(function(la){var ma=m.getInstance(la.id);ma&&ma.removeEventListeners();});}da[this.scrubberKey]&&da[this.scrubberKey].remove();},getParent:function(){if(this.parentKey)return q.get(this.parentKey);return null;}});var ja={SCROLL_TO_OFFSET:115,HEADER_SCROLL_CUTOFF:30,CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(ka,la,ma,na,oa,pa){ha();var qa=new ga(ka,la,ma,na,pa);if(!oa){ca.push(la);ba[la]=true;}else{qa.parentKey=oa;q.get(oa).subSections=q.get(oa).subSections||[];q.get(oa).subSections.push(qa);q.get(oa).subSections.sort(function(ra,sa){return sa.sortKey-ra.sortKey;});}q.set(la,qa);ja.checkCurrentSectionChange();g.inform(o.SECTION_REGISTERED,{scrubberKey:la},g.BEHAVIOR_PERSISTENT);},reset:function(){ja.stopLoadingContent();y=false;q.removeAll();z=0;aa=null;ba={};ca=[];da={};ea=[];fa=null;},stopLoadingContent:function(){for(var ka in da)da[ka]&&da[ka].remove();for(var la=0;la<ea.length;la++)ea[la].cancel();},setContentHeader:function(ka){fa=ka;},checkCurrentSectionChange:function(){var ka=ja.getCurrentSection(),la=aa&&aa.scrubberKey;if(ka&&ka.scrubberKey!==la){aa=ka;var ma=ka.scrubberKey,na=ka.parentKey;if(!na){na=ma;ma=null;}p.sectionHasChanged(na,ma);}},getCurrentSection:function(){var ka={},la=q.getAll();for(var ma in la){var na=la[ma];if(!na.loaded)continue;var oa=t.getElementPosition(na.node,'viewport').y;if(oa<ja.CURRENT_SECTION_OFFSET)ka[oa]=na;}var pa=Math.max.apply(this,Object.keys(ka)),qa=pa==-Infinity;if(!qa){return ka[pa];}else return null;},enableScrollLoad:function(ka,la,ma){ka=u(ka);var na=ja.getNextSectionKey(la);if(na)da[na]=new k(ka,ia.bind(null,na),false,ma||1000);},getNextSectionKey:function(ka){var la=q.get(ka),ma=la.getParent(),na=null,oa=null;if(ma)for(var pa=0;pa<ma.subSections.length-1;pa++)if(ma.subSections[pa].scrubberKey==ka)na=ma.subSections[pa+1].scrubberKey;if(!na)for(var qa=0;qa<ca.length-qa;qa++)if(ca[qa]==ma.scrubberKey){oa=q.get(ca[qa+1]).subSections[0];if(oa)na=oa.scrubberKey;}return na;},navigateToSection:function(ka,la,ma){la=!!la;var na=q.get(ka);if(!na)return;if(!na.getParent()){ka=na.subSections[0].scrubberKey;na=q.get(ka);}for(var oa=0;oa<ca.length;oa++){var pa=q.get(ca[oa]);for(var qa=0;qa<pa.subSections.length;qa++){if(pa.subSections[qa].scrubberKey==ka)break;pa.subSections[qa].deactivateScrollLoad();}if(pa.scrubberKey==na.getParent().scrubberKey)break;}na.activateScrollLoad();na.load();ja.adjustContentPadding();var ra=t.getScrollPosition().x,sa=t.getElementPosition(na.node).y;if(!la){var ta=ja.SCROLL_TO_OFFSET;j.scrollTo(new t(ra,sa-ta,'document'));}},adjustContentPadding:function(){u('fbTimelineLogBody').style.paddingBottom=t.getViewportDimensions().y-ja.CURRENT_SECTION_OFFSET-ja.HEADER_SCROLL_CUTOFF+'px';},sectionHasContent:function(ka){var la=q.get(ka);la&&la.contentAdded(fa);fa=null;},sectionFullyLoaded:function(ka){var la=q.get(ka);la&&la.fullyLoaded();}};e.exports=ja;},null);
__d("ActivityLogSearch",["Event","CSS","DOM","Input","Run"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o){var p=i.find(o,'.inputtext'),q=g.listen(n,'click',function(){h.hide(m);h.show(o);p.focus();});k.onLeave(q.remove.bind(q));var r=g.listen(p,'blur',function(){if(!j.getValue(p)){h.hide(o);h.show(m);}});k.onLeave(r.remove.bind(r));}e.exports=l;},null);
__d("PopoverMenuDynamicTooltip",["DOMQuery","Tooltip","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._popoverMenu=k;this._setMenuSubscription=null;this._changeSubscription=null;}j.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));};j.prototype.disable=function(){"use strict";this._popoverMenu.unsubscribe(this._setMenuSubscription);this._setMenuSubscription=null;this._removeChangeSubscription();};j.prototype._onSetMenu=function(){"use strict";this._removeChangeSubscription();this._menu=this._popoverMenu.getMenu();this._changeSubscription=this._menu.subscribe('change',function(k,l){var m=l.item;if(l[0])m=l[0].item;if(!m)return;var n=m.getLabel();n=n?n.toString():null;if(!n)return;var o=this._popoverMenu.getTriggerElem(),p=g.scry(o,"span._55pe")[0];if(p&&p.nodeName){var q=p.parentNode;if(q)h.set(q,n);}}.bind(this));};j.prototype._removeChangeSubscription=function(){"use strict";if(this._changeSubscription){this._menu.unsubscribe(this._changeSubscription);this._changeSubscription=null;}};e.exports=j;},null);
__d("ScrollHighlight",["DOMScroll","highlight"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={actOn:function(j,k,l){g.scrollTo(j,true,false,false,l);h(j,null,k);}};e.exports=i;},null);
__d("ProfileApprovalController",["AsyncRequest","DOM","Event","HTML","$","copyProperties","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o){"use strict";this.queueType=o;var p=m('profileApprovalSeeMoreLink');if(p)i.listen(p,'click',this.clickedSeeMore.bind(this));}n.prototype.getNewStories=function(){"use strict";var o=this.getStoryData(),p={filter:this.FILTER_NEWER,filter_timestamp:o.newest_time,filter_fbid:o.newest_fbid};new g().setURI('/ajax/profile/approval/get_more.php').setData(p).setHandler(this.handleContent).send();};n.prototype.clickedSeeMore=function(){"use strict";var o=this.getStoryData(),p={queue_type:this.queueType,filter:this.FILTER_OLDER,filter_timestamp:o.oldest_time,filter_fbid:o.oldest_fbid};new g().setURI('/ajax/profile/approval/get_more.php').setData(p).setHandler(this.handleContent).send();};n.prototype.handleContent=function(o){"use strict";var p=o.payload;if(p.pager_error){h.replace(k('profileApprovalSeeMoreContainer'),j(p.pager_markup));return;}if(p.hide_more_pager)h.remove(k('profileApprovalSeeMoreContainer'));if(!p.items_markup)return;if(p.insert_before)h.prependContent(h.find(k('profileApprovalContentContainer'),'.profileApprovalList'),j(p.items_markup));if(p.insert_after)h.appendContent(h.find(k('profileApprovalContentContainer'),'.profileApprovalList'),j(p.items_markup));};n.prototype.getStoryData=function(){"use strict";var o=h.scry(k('profileApprovalContentContainer'),'.profileApprovalStoryContainer');if(!o)return;var p=o[0],q=o[o.length-1];return {newest_time:p.getAttribute('data-timestamp'),newest_fbid:p.getAttribute('data-fbid'),oldest_time:q.getAttribute('data-timestamp'),oldest_fbid:q.getAttribute('data-fbid')};};n.NO_MORE_CONTENT='no_more_content';l(n.prototype,{FILTER_NONE:0,FILTER_OLDER:1,FILTER_NEWER:2});e.exports=n;},null);
__d("legacy:profile-approval-controller",["ProfileApprovalController"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.ProfileApprovalController=b('ProfileApprovalController');},3);
__d("TimelineAllActivitySideNav",["CSS","DOM","DOMDimensions","DOMQuery","FutureSideNav","PageTransitions","Style","UIPagelet","$","copyProperties","csx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(u){var v=u==='review'||u==='tagreview',w=r('rightColContent'),x=w&&j.scry(w,".fbTimelineLogScrubber")[0];x&&g.conditionShow(x,!v);}var t={init:function(u,v,w,x,y){var z=j.find(o('contentArea'),"._6-0"),aa=h.getID(z);m.set(z,'minHeight',i.getViewportDimensions().height+'px');g.addClass(u,'fixed_elem');s(y||'all');l.registerHandler(function(ba){if(v===ba.getPath()&&ba.getQueryData().sk==w){var ca=p({profile_id:x,renderContentsOnly:1,uripath:ba.toString()},ba.getQueryData()),da=k.getInstance(),ea=da&&da._getItemForKey(ca.log_filter||'all');ea&&da.setLoading(ea);n.loadFromEndpoint('TimelineAllActivityColumn',aa,ca,{jsNonblock:true,constHeight:true,displayCallback:function(fa){fa();ea&&da.setSelected(ea);document.body.scrollTop=0;s(ca.log_filter||'all');l.transitionComplete(true);}});return true;}return false;});}};e.exports=t;},null);
__d("ApprovalQueueCountUpdater",["ge","Arbiter","DOM"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={updateCounts:function(k,l){var m=k.friends+k.others,n=g('tag_count_friends'),o=g('tag_count_other');h.inform('NavigationMessage/navigationCount',{key:'review',count:m,hide:true});i.setContent(n,k.friends<=l?k.friends:l+"+");i.setContent(o,k.others<=l?k.others:l+"+");}};e.exports=j;},null);