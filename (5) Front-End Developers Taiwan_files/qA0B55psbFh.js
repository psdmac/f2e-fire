/*!CK:2412490303!*//*1425869682,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ljjiu"]); }

__d("legacy:dom-html",["HTML"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.HTML=b('HTML');},3);
__d("TimelineCoverDisclaimer",["Dialog"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k){if(h.displayed===(void 0)){h.displayed=true;}else return;new g().setModal(true).setTitle(i).setBody(j).setButtonsMessage(k).setButtons(g.OK).show();}e.exports=h;},null);
__d("legacy:TimelineCoverDisclaimer",["TimelineCoverDisclaimer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.TimelineCoverDisclaimer=b('TimelineCoverDisclaimer');},3);
__d("TimelineNavigation",["Arbiter","CSS","DOM","Event","PageTransitions","Parent","ProfileTabUtils","TimelineComponentKeys","TimelineController","URI","$","createArrayFromMixed","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=4,u=110,v=20,w=119,x=328,y=10,z=3,aa=false,ba=21,ca,da,ea,fa=[],ga=[],ha,ia=0,ja,ka=0,la=0,ma,na=t,oa=false,pa=false,qa=null,ra,sa=false,ta,ua,va=false;function wa(kb,lb,mb){if(!lb.firstChild){i.remove(lb);return;}ga.push(lb);za(mb.recent);h.removeClass(l.byTag(lb,'li'),'empty');if(ha&&(ka>t||la>0))h.removeClass(ha,'notready');ya();if(mb.async){db();fb();}}function xa(kb,lb,mb){i.remove(l.byTag(lb,'li'));if(!mb.async){ma++;}else{ka--;db();fb();}ya();}function ya(){var kb=ha?0:ba;if(ka<=t){var lb=x+w*Math.max(0,t-ka)+kb;if(ja)ja.style.width=lb+'px';na=ka;ab();}}function za(kb){if(kb){la++;}else ka++;ab();}function ab(){if(!ta)return;var kb=Math.max(0,ka-t)+la;if(ia&&ha){i.setContent(ia,kb===0?" ":kb);h.conditionClass(ha,'fbTimelineMoreButtonZero',kb===0);if(!oa)h.conditionShow(ha,kb>0);}}function bb(){var kb=i.scry(q('fbTimelineNavTopRow'),'li.tile'),lb=0,mb=0,nb=Math.max(0,t-na),ob=false;for(var pb=0;pb<kb.length;pb++){if(kb[pb]==ja||kb[pb]==ha)continue;ob=((lb+nb)%t===0);h.conditionClass(kb[pb],'leftMost',(lb!==0&&ob));if(!h.hasClass(kb[pb],'empty'))mb=lb;lb++;}ob=((mb+1+nb)%t===0);var qb=kb.length-1-nb;if(ob){if(oa&&(mb+1+nb)/t<z){qb=Math.min(qb,mb+t);pa=true;}else qb=mb;}else{var rb=((mb+1+nb)%t);qb=mb+(t-rb);pa=false;}pb=0;for(pb=0;pb<=qb;pb++)if(kb[pb]&&(kb[pb]==ja||kb[pb]==ha)){qb++;}else kb[pb]&&h.hasClass(kb[pb],'empty')&&h.removeClass(kb[pb],'hidden_elem');}function cb(kb,lb,mb){var nb=i.scry(kb,'li.tile');if(!lb)lb=0;var ob=false;for(var pb=lb;pb<nb.length;pb++){ob=((pb-mb)%t===0);var qb=nb[pb];h.conditionClass(qb,'leftMost',ob);if(h.hasClass(qb,'empty'))h.removeClass(qb,'hidden_elem');}}function db(){bb();var kb=s('fbTimelineNavSecondaryRow');kb&&cb(kb,0,0);}function eb(){if(!ha)return;if(h.hasClass(ha,'notready'))return;h.toggleClass(ha,'fbTimelineMoreButtonOpen');var kb=s('fbRecentAppTitle');kb&&h.conditionClass(kb,'hidden_elem',la===0);if(h.hasClass(ha,'fbTimelineMoreButtonOpen')){db();}else ab();fb();}function fb(){if(ha&&!h.hasClass(ha,'fbTimelineMoreButtonOpen')){ca.style.height='';h.removeClass(ca,'expanded');}else{var kb=ka+(t-na),lb=((la>0)?y:0)+u*(Math.ceil(la/t))+u*(Math.ceil(kb/t))+u*(pa?1:0)+v;h.addClass(ca,'expanded');ca.style.height=lb+'px';}}function gb(kb){var lb=m.IsTimelineTab(kb),mb=l.byClass(ca,'fbTimelineTopSectionBase'),nb=s('timeline_tour_toolbar');if(ha){h.removeClass(ha,'fbTimelineMoreButtonOpen');fb();}nb&&h.conditionShow(nb,lb);if(mb)h.conditionClass(mb,'collapsedHead',!lb);}function hb(event){if(va)return true;if(!l.byTag(event.getTarget(),'a')){var kb=p(i.find(ja,'a.title').href);if(p(location).getSubdomain()=="business")kb.setSubdomain("business");k.go(kb.toString());}}function ib(){if(ha)setTimeout(function(){ha.removeAttribute('ajaxify');ha.removeAttribute('rel');},0);qa&&qa.remove();}var jb={UPDATE_PAGE:'TimelineNavigation/updatePage',init:function(kb,lb,mb,nb){if(aa)return;aa=true;ca=kb;ha=lb;da=p.getRequestURI();ja=i.scry(ca,'li.about')[0];gb(o.getCurrentKey());oa=nb;g.inform(jb.UPDATE_PAGE);if(ha){ia=i.find(ha,'div.text');qa=j.listen(ha,'click',ib);}ra=q('fbTimelineNavigationLoadContainer');i.appendContent(q('content'),ra);if(ja)ua=j.listen(ja,'click',hb);fa.forEach(function(pb){if(!pb[2].remove){wa.apply(this,pb);}else xa.apply(this,pb);});fa=[];var ob=l.byClass(kb,'fbTimelineSection');if(ob)i.scry(ob,'ul.uiButtonGroup').forEach(function(pb){r(pb.childNodes).forEach(function(qb){qb.childNodes.length||i.remove(qb);});if(pb.firstChild){h.addClass(pb.firstChild,'firstItem');}else i.remove(pb);});o.register(n.NAV,jb);},reset:function(){ua&&ua.remove();ua=null;ta&&ta.remove();ta=null;aa=false;ca=null;ea=null;ga=[];ha=null;ia=null;ja=null;ka=0;la=0;ma=0;na=t;oa=false;pa=false;ra=null;sa=false;va=false;},initializeMorePager:function(){if(ta)return;if(ha)ta=j.listen(ha,'click',eb);},registerNav:function(kb,lb,mb){aa?(mb.remove?xa.apply(this,arguments):wa.apply(this,arguments)):fa.push(arguments);},redraw:function(){db();fb();},setEditMode:function(kb){va=kb;}};e.exports=jb;},null);